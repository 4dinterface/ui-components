{"version":3,"sources":["Component.js"],"names":[],"mappings":"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","file":"Component-compiled.js","sourcesContent":["ï»¿\"use strict\";\r\n\r\nclass ColorPicker extends AbstractComponent{\r\n  /**\r\n   *\r\n   * @param options\r\n   */\r\n  constructor(options){\r\n    super();\r\n    var elId = options.id;\r\n    this._el = document.getElementById(elId)||options.el;\r\n    this._el.style.position=\"relative\";//\r\n    this._el.className=\"color-picker\";\r\n    if (this._el === null) return;\r\n\r\n    this._widthBorder=8;\r\n    this._width=107;\r\n    this._height=107;\r\n\r\n    this._el.style.width=this._width+\"px\";\r\n    this._el.style.height=this._height+\"px\";\r\n\r\n    this._create();\r\n\r\n    this._el.addEventListener(\"mousemove\", this._onMove.bind(this));\r\n    this._el.addEventListener(\"mousedown\", this._onClick.bind(this));\r\n\r\n    this._el.addEventListener(\"touchstart\", this._onClick.bind(this));\r\n    this._el.addEventListener(\"touchmove\", this._onMove.bind(this));\r\n\r\n    this._color=\"#00AAFF\";\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @private\r\n   */\r\n  _create(){\r\n    this.canvas=document.createElement('canvas');\r\n    this.canvas.width=this._width;\r\n    this.canvas.height=this._height;\r\n    this.canvas.id=\"picker\";\r\n    this._el.appendChild(this.canvas);\r\n    this.ctx=this.canvas.getContext(\"2d\");\r\n\r\n    this._selector=document.createElement('div');\r\n    this._selector.className=\"selector\";\r\n    this._selector.style.width=5+\"px\";\r\n    this._selector.style.height=5+\"px\";\r\n    this._selector.style.position=\"absolute\";\r\n    this._selector.style.left=60+\"px\";\r\n    this._selector.style.top=60+\"px\";\r\n    this._el.appendChild(this._selector);\r\n\r\n    this._face=document.createElement('div');\r\n    this._face.style.width=\"100%\";\r\n    this._face.style.height=\"100%\";\r\n    this._face.style.position=\"absolute\";\r\n    this._face.style.left=0+\"px\";\r\n    this._face.style.top=0+\"px\";\r\n    this._el.appendChild(this._face);\r\n\r\n    var image = new Image();\r\n    image.onload =()=>{\r\n      this.ctx.drawImage(image, 0, 0, image.width, image.height);\r\n      this._setColor(52,52);\r\n    } // draw the image on the canvas\r\n    image.src=\"components/color-picker/color-wheel.png\";\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @returns {string|string|*}\r\n   */\r\n  get value(){\r\n    return this._color;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param evt\r\n   * @private\r\n   */\r\n  _onClick(evt){\r\n    var pos=this._calc(evt);\r\n    if(pos) this._setColor(pos.x,pos.y);\r\n    evt.preventDefault();\r\n    evt.stopPropagation();\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param evt\r\n   * @private\r\n   */\r\n  _onMove(evt){\r\n    var pos=this._calc(evt);\r\n    if(pos && (evt.buttons==1 || evt.changedTouches)) this._setColor(pos.x,pos.y);\r\n    evt.preventDefault();\r\n    evt.stopPropagation();\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param event\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  _calc(event){\r\n    var e=event.changedTouches?event.changedTouches[0]:event,\r\n        canvasRect=this.canvas.getBoundingClientRect(),\r\n        canvasX = Math.round(e.clientX - canvasRect.left),\r\n        canvasY = Math.round(e.clientY - canvasRect.top ),\r\n        imageData = this.ctx.getImageData(canvasX, canvasY, 1, 1);\r\n\r\n    if(imageData.data[3]==0) return false;\r\n    return{\r\n      x:canvasX,\r\n      y:canvasY\r\n    };\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param x\r\n   * @param y\r\n   * @private\r\n   */\r\n  _setColor(x,y){\r\n    var imageData = this.ctx.getImageData(x, y, 1, 1),\r\n        pixel = imageData.data,\r\n        red=pixel[0].toString(16),\r\n        green=pixel[1].toString(16),\r\n        blue=pixel[2].toString(16);\r\n\r\n    this._selector.style.left=(x-2)+this.canvas.offsetLeft+\"px\";\r\n    this._selector.style.top=(y-2)+this.canvas.offsetTop+\"px\";\r\n\r\n    this._color=\"#\"+(red.length<2?\"0\"+red:red);\r\n    this._color+=green.length<2?\"0\"+green:green;\r\n    this._color+=blue.length<2?\"0\"+blue:blue;\r\n    this.fire(\"change\",{});\r\n  }\r\n}"]}